# è³‡æ–™åº«è®Šæ›´æª¢æŸ¥æ¸…å–®

## ä½¿ç”¨èªªæ˜

é€™ä»½æª¢æŸ¥æ¸…å–®ç”¨æ–¼ç¢ºä¿æ‰€æœ‰è³‡æ–™åº«è®Šæ›´éƒ½ç¶“éå®Œæ•´çš„é©—è­‰å’Œæ–‡æª”åŒ–ã€‚åœ¨åŸ·è¡Œä»»ä½• schema è®Šæ›´å‰ï¼Œè«‹é€é …æª¢æŸ¥ä¸¦æ‰“å‹¾ã€‚

---

## ğŸ” è®Šæ›´å‰æª¢æŸ¥

### è¨­è¨ˆéšæ®µ

- [ ] **éœ€æ±‚ç¢ºèª**
  - [ ] è®Šæ›´éœ€æ±‚å·²æ˜ç¢ºå®šç¾©
  - [ ] å·²è©•ä¼°å°ç¾æœ‰åŠŸèƒ½çš„å½±éŸ¿
  - [ ] å·²ç¢ºèªæ˜¯å¦æœ‰æ›¿ä»£æ–¹æ¡ˆ

- [ ] **è³‡æ–™æ¨¡å‹è¨­è¨ˆ**
  - [ ] æ¬„ä½åç¨±éµå¾ªå‘½åè¦ç¯„ï¼ˆsnake_caseï¼‰
  - [ ] è³‡æ–™å‹åˆ¥é¸æ“‡é©ç•¶ï¼ˆè€ƒæ…®æœªä¾†æ“´å±•ï¼‰
  - [ ] å¿…è¦æ¬„ä½è¨­å®š NOT NULL
  - [ ] å·²å®šç¾©é è¨­å€¼ï¼ˆå¦‚æœéœ€è¦ï¼‰
  - [ ] æ™‚é–“æˆ³è¨˜æ¬„ä½åŒ…å« `created_at` å’Œ `updated_at`

- [ ] **é—œè¯è¨­è¨ˆ**
  - [ ] å¤–éµé—œä¿‚å·²æ˜ç¢ºå®šç¾©
  - [ ] CASCADE DELETE è¦å‰‡å·²ç¢ºèªï¼ˆæ˜¯å¦éœ€è¦ç´šè¯åˆªé™¤ï¼Ÿï¼‰
  - [ ] å¤šå°å¤šé—œä¿‚ä½¿ç”¨é—œè¯è¡¨
  - [ ] å¾ªç’°åƒè€ƒå•é¡Œå·²è™•ç†ï¼ˆå¦‚ industries çš„ parent_codeï¼‰

- [ ] **ç´¢å¼•è¦åŠƒ**
  - [ ] ä¸»éµç´¢å¼•ï¼ˆè‡ªå‹•å»ºç«‹ï¼‰
  - [ ] å¤–éµç´¢å¼•ï¼ˆæŸ¥è©¢å„ªåŒ–ï¼‰
  - [ ] å”¯ä¸€ç´¢å¼•ï¼ˆè³‡æ–™å®Œæ•´æ€§ï¼‰
  - [ ] è¤‡åˆç´¢å¼•ï¼ˆå¸¸è¦‹æŸ¥è©¢æ¨¡å¼ï¼‰
  - [ ] å…¨æ–‡æœå°‹ç´¢å¼•ï¼ˆå¦‚æœéœ€è¦ ILIKE æŸ¥è©¢ï¼‰

- [ ] **æ•ˆèƒ½è©•ä¼°**
  - [ ] é ä¼°è³‡æ–™é‡ï¼ˆè¡Œæ•¸ã€è³‡æ–™å¤§å°ï¼‰
  - [ ] æ˜¯å¦éœ€è¦åˆ†å€ï¼ˆTimescaleDB hypertableï¼‰
  - [ ] æ˜¯å¦éœ€è¦å¿«å–ç­–ç•¥
  - [ ] æŸ¥è©¢æ•ˆèƒ½æ¸¬è©¦è¨ˆç•«

### ç›¸å®¹æ€§æª¢æŸ¥

- [ ] **å‘å¾Œç›¸å®¹æ€§**
  - [ ] æ–°å¢æ¬„ä½å…è¨± NULL æˆ–æœ‰é è¨­å€¼
  - [ ] ä¸åˆªé™¤ç¾æœ‰æ¬„ä½ï¼ˆä½¿ç”¨ deprecated æ¨™è¨˜ï¼‰
  - [ ] ä¸ä¿®æ”¹ç¾æœ‰æ¬„ä½è³‡æ–™å‹åˆ¥ï¼ˆé™¤éå®‰å…¨ï¼‰
  - [ ] å¤–éµç´„æŸä¸å½±éŸ¿ç¾æœ‰è³‡æ–™

- [ ] **è³‡æ–™é·ç§»è¨ˆç•«**
  - [ ] æ˜¯å¦éœ€è¦è³‡æ–™é·ç§»è…³æœ¬
  - [ ] å¤§é‡è³‡æ–™é·ç§»çš„æ•ˆèƒ½è©•ä¼°
  - [ ] é·ç§»éç¨‹ä¸­çš„è³‡æ–™ä¸€è‡´æ€§ä¿è­‰
  - [ ] é·ç§»å¤±æ•—çš„å›æ»¾è¨ˆç•«

---

## ğŸ“ å¯¦ä½œéšæ®µ

### 1. Model å»ºç«‹

- [ ] **SQLAlchemy Model**
  - [ ] å»ºç«‹æª”æ¡ˆ `backend/app/models/your_model.py`
  - [ ] ç¹¼æ‰¿ `Base` class
  - [ ] è¨­å®š `__tablename__`
  - [ ] å®šç¾©æ‰€æœ‰æ¬„ä½èˆ‡è³‡æ–™å‹åˆ¥
  - [ ] è¨­å®š `comment` èªªæ˜ï¼ˆé‡è¦æ¬„ä½ï¼‰
  - [ ] å®šç¾© Relationshipsï¼ˆ`relationship()`, `back_populates`ï¼‰
  - [ ] è¨­å®š `__table_args__`ï¼ˆç´¢å¼•ã€ç´„æŸï¼‰
  - [ ] å¯¦ä½œ `__repr__()` æ–¹æ³•

- [ ] **è¨»å†Šåˆ° Base**
  - [ ] åœ¨ `app/db/base.py` çš„ `import_models()` ä¸­å°å…¥
  - [ ] ç¢ºèªç„¡å¾ªç’°å°å…¥å•é¡Œ

### 2. Schema å»ºç«‹

- [ ] **Pydantic Schema**
  - [ ] å»ºç«‹æª”æ¡ˆ `backend/app/schemas/your_model.py`
  - [ ] å®šç¾© `YourModelBase`ï¼ˆå…±ç”¨æ¬„ä½ï¼‰
  - [ ] å®šç¾© `YourModelCreate`ï¼ˆå»ºç«‹æ™‚éœ€è¦çš„æ¬„ä½ï¼‰
  - [ ] å®šç¾© `YourModelUpdate`ï¼ˆæ›´æ–°æ™‚å…è¨±çš„æ¬„ä½ï¼‰
  - [ ] å®šç¾© `YourModel`ï¼ˆå®Œæ•´è³‡æ–™ï¼ŒåŒ…å« id, timestampsï¼‰
  - [ ] è¨­å®š `model_config = ConfigDict(from_attributes=True)`
  - [ ] æ¬„ä½é©—è­‰ï¼ˆä½¿ç”¨ `Field()` è¨­å®š min/max/regexï¼‰

### 3. Alembic é·ç§»

- [ ] **å»ºç«‹é·ç§»**
  - [ ] åŸ·è¡Œ `alembic revision --autogenerate -m "æè¿°"`
  - [ ] æª¢æŸ¥ç”Ÿæˆçš„é·ç§»æª”æ¡ˆè·¯å¾‘
  - [ ] ç¢ºèª `revision` å’Œ `down_revision` æ­£ç¢º

- [ ] **å¯©æŸ¥é·ç§»å…§å®¹**
  - [ ] `upgrade()` å‡½æ•¸æ­£ç¢º
  - [ ] `downgrade()` å‡½æ•¸å¯å›æ»¾
  - [ ] å¤–éµç´„æŸçš„ `ondelete` è¦å‰‡æ­£ç¢º
  - [ ] ç´¢å¼•å®šç¾©å®Œæ•´ï¼ˆAlembic å¯èƒ½æ¼æ‰è¤‡åˆç´¢å¼•ï¼‰
  - [ ] é è¨­å€¼è¨­å®šæ­£ç¢º
  - [ ] NOT NULL ç´„æŸå®‰å…¨ï¼ˆç¾æœ‰è³‡æ–™ä¸æœƒé•åï¼‰

- [ ] **æ¸¬è©¦é·ç§»**
  - [ ] åœ¨é–‹ç™¼ç’°å¢ƒåŸ·è¡Œ `alembic upgrade head`
  - [ ] æª¢æŸ¥è³‡æ–™è¡¨å·²å»ºç«‹ï¼š`\d your_table`
  - [ ] æª¢æŸ¥ç´¢å¼•ï¼š`\di your_table*`
  - [ ] æª¢æŸ¥å¤–éµï¼š`\d+ your_table`
  - [ ] æ¸¬è©¦å›æ»¾ï¼š`alembic downgrade -1`
  - [ ] å†æ¬¡å‡ç´šï¼š`alembic upgrade head`

### 4. Repository å±¤

- [ ] **Repository å»ºç«‹**
  - [ ] å»ºç«‹æª”æ¡ˆ `backend/app/repositories/your_model.py`
  - [ ] å¯¦ä½œ `create()`ã€`get_by_id()`ã€`update()`ã€`delete()`
  - [ ] è¤‡é›œæŸ¥è©¢ä½¿ç”¨ `joinedload()` é¿å… N+1
  - [ ] éŒ¯èª¤è™•ç†ï¼ˆæ•ç² SQLAlchemy ç•°å¸¸ï¼‰

### 5. Service å±¤

- [ ] **Service å»ºç«‹**
  - [ ] å»ºç«‹æª”æ¡ˆ `backend/app/services/your_service.py`
  - [ ] å¯¦ä½œæ¥­å‹™é‚è¼¯æ–¹æ³•
  - [ ] é…é¡æª¢æŸ¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
  - [ ] è³‡æ–™é©—è­‰
  - [ ] æ¬Šé™æª¢æŸ¥
  - [ ] å‘¼å« Repository å±¤æ–¹æ³•

### 6. API ç«¯é»

- [ ] **API å¯¦ä½œ**
  - [ ] å»ºç«‹æª”æ¡ˆ `backend/app/api/v1/your_endpoint.py`
  - [ ] å¯¦ä½œ CRUD ç«¯é»
  - [ ] è¨­å®šé€Ÿç‡é™åˆ¶ï¼ˆ`@limiter.limit()`ï¼‰
  - [ ] ä¾è³´æ³¨å…¥ï¼ˆ`get_db`, `get_current_user`ï¼‰
  - [ ] çµæ§‹åŒ–æ—¥èªŒï¼ˆ`api_log.log_operation()`ï¼‰
  - [ ] éŒ¯èª¤è™•ç†ï¼ˆ`_handle_error()`ï¼‰

- [ ] **è·¯ç”±è¨»å†Š**
  - [ ] åœ¨ `backend/app/api/v1/__init__.py` ä¸­è¨»å†Šè·¯ç”±

---

## ğŸ§ª æ¸¬è©¦éšæ®µ

### å–®å…ƒæ¸¬è©¦

- [ ] **Model æ¸¬è©¦**
  - [ ] æ¸¬è©¦å»ºç«‹ç‰©ä»¶
  - [ ] æ¸¬è©¦ relationships æ­£ç¢º
  - [ ] æ¸¬è©¦ `__repr__()` è¼¸å‡º

- [ ] **Repository æ¸¬è©¦**
  - [ ] æ¸¬è©¦ CRUD æ“ä½œ
  - [ ] æ¸¬è©¦å¤–éµç´„æŸï¼ˆåˆªé™¤çˆ¶ç‰©ä»¶æ™‚æª¢æŸ¥ç´šè¯ï¼‰
  - [ ] æ¸¬è©¦å”¯ä¸€ç´„æŸï¼ˆé‡è¤‡æ’å…¥æ‡‰å¤±æ•—ï¼‰
  - [ ] æ¸¬è©¦æŸ¥è©¢æ•ˆèƒ½ï¼ˆå¤§é‡è³‡æ–™ï¼‰

- [ ] **API æ¸¬è©¦**
  - [ ] æ¸¬è©¦æˆåŠŸæ¡ˆä¾‹ï¼ˆHTTP 200/201ï¼‰
  - [ ] æ¸¬è©¦é©—è­‰å¤±æ•—ï¼ˆHTTP 422ï¼‰
  - [ ] æ¸¬è©¦æ¬Šé™æ‹’çµ•ï¼ˆHTTP 403ï¼‰
  - [ ] æ¸¬è©¦è³‡æºä¸å­˜åœ¨ï¼ˆHTTP 404ï¼‰
  - [ ] æ¸¬è©¦é€Ÿç‡é™åˆ¶ï¼ˆHTTP 429ï¼‰

### æ•´åˆæ¸¬è©¦

- [ ] **è³‡æ–™å®Œæ•´æ€§æ¸¬è©¦**
  - [ ] å»ºç«‹æ¸¬è©¦è³‡æ–™ï¼ˆåŒ…å«æ‰€æœ‰é—œè¯ï¼‰
  - [ ] æ¸¬è©¦ç´šè¯åˆªé™¤è¡Œç‚º
  - [ ] æ¸¬è©¦å­¤å…’è¨˜éŒ„æª¢æŸ¥
  - [ ] æ¸¬è©¦è³‡æ–™ä¸€è‡´æ€§ï¼ˆå¦‚å›æ¸¬çµæœèˆ‡äº¤æ˜“è¨˜éŒ„ï¼‰

- [ ] **æ•ˆèƒ½æ¸¬è©¦**
  - [ ] æ’å…¥ 1000+ ç­†è¨˜éŒ„æ¸¬è©¦
  - [ ] æŸ¥è©¢æ•ˆèƒ½æ¸¬è©¦ï¼ˆä½¿ç”¨ `EXPLAIN ANALYZE`ï¼‰
  - [ ] ç´¢å¼•ä½¿ç”¨æƒ…æ³æª¢æŸ¥
  - [ ] ä¸¦ç™¼å¯«å…¥æ¸¬è©¦ï¼ˆå¦‚æœéœ€è¦ï¼‰

---

## ğŸ“š æ–‡æª”æ›´æ–°

### å¿…é ˆæ›´æ–°çš„æ–‡æª”

- [ ] **DATABASE_SCHEMA_REPORT.md**
  - [ ] æ–°å¢è³‡æ–™è¡¨åˆ°ã€Œè³‡æ–™è¡¨çµæ§‹è©³ç´°èªªæ˜ã€
  - [ ] æ›´æ–°ã€Œé—œè¯é—œä¿‚åœ–ã€
  - [ ] æ›´æ–°ã€Œç´¢å¼•ç­–ç•¥ã€
  - [ ] æ›´æ–°ã€Œé·ç§»æ­·å²ã€
  - [ ] æ›´æ–°çµ±è¨ˆæ•¸æ“šï¼ˆè³‡æ–™è¡¨æ•¸ã€å¤§å°ï¼‰

- [ ] **CLAUDE.md**
  - [ ] æ›´æ–°ã€Œè³‡æ–™åº«é·ç§»ç³»çµ±ã€çš„ã€Œå·²æœ‰æ¨¡å‹ã€æ¸…å–®
  - [ ] å¦‚æœ‰æ–° APIï¼Œæ›´æ–°ã€Œå·²å¯¦ä½œçš„ API ç«¯é»ã€
  - [ ] æ›´æ–°ã€Œæœ€æ–°æ›´æ–°ã€ç« ç¯€

- [ ] **API æ–‡æª”**
  - [ ] OpenAPI schema è‡ªå‹•ç”Ÿæˆï¼ˆFastAPIï¼‰
  - [ ] æ–°å¢ç«¯é»èªªæ˜å’Œç¯„ä¾‹
  - [ ] æ›´æ–° Swagger UIï¼ˆæª¢æŸ¥ http://localhost:8000/docsï¼‰

### é¸æ“‡æ€§æ–‡æª”

- [ ] **README.md**ï¼ˆå¦‚æœæ˜¯é‡å¤§åŠŸèƒ½ï¼‰
- [ ] **CHANGELOG.md**ï¼ˆç‰ˆæœ¬ç™¼å¸ƒæ™‚ï¼‰
- [ ] **ä½¿ç”¨æŒ‡å—**ï¼ˆå¦‚ `BATCH_SYNC_GUIDE.md` ç¯„ä¾‹ï¼‰

---

## ğŸš€ éƒ¨ç½²éšæ®µ

### éƒ¨ç½²å‰æª¢æŸ¥

- [ ] **Git æäº¤**
  - [ ] æ‰€æœ‰æª”æ¡ˆå·²åŠ å…¥ç‰ˆæœ¬æ§åˆ¶
  - [ ] Commit message æ¸…æ¥šæè¿°è®Šæ›´
  - [ ] é·ç§»æª”æ¡ˆå·²æäº¤

- [ ] **ç’°å¢ƒè®Šæ•¸**
  - [ ] æª¢æŸ¥æ˜¯å¦éœ€è¦æ–°çš„ç’°å¢ƒè®Šæ•¸
  - [ ] æ›´æ–° `.env.example`

- [ ] **ä¾è³´å¥—ä»¶**
  - [ ] æª¢æŸ¥æ˜¯å¦éœ€è¦æ–°çš„ Python å¥—ä»¶
  - [ ] æ›´æ–° `requirements.txt`

### éƒ¨ç½²æµç¨‹

- [ ] **é–‹ç™¼ç’°å¢ƒé©—è­‰**
  - [ ] æ‰€æœ‰æ¸¬è©¦é€šé
  - [ ] æ‰‹å‹•æ¸¬è©¦ API ç«¯é»
  - [ ] æª¢æŸ¥æ—¥èªŒç„¡éŒ¯èª¤

- [ ] **åŸ·è¡Œé·ç§»**
  ```bash
  docker compose exec backend alembic upgrade head
  ```

- [ ] **é©—è­‰é·ç§»çµæœ**
  ```bash
  # æª¢æŸ¥è³‡æ–™è¡¨
  docker compose exec postgres psql -U quantlab quantlab -c "\d your_table"

  # æª¢æŸ¥ç•¶å‰ç‰ˆæœ¬
  docker compose exec backend alembic current
  ```

- [ ] **å‚™ä»½è³‡æ–™åº«**ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
  ```bash
  ./scripts/backup_database.sh
  ```

- [ ] **é‡å•Ÿæœå‹™**
  ```bash
  docker compose restart backend
  docker compose restart celery-worker
  ```

---

## âœ… éƒ¨ç½²å¾Œé©—è­‰

### åŠŸèƒ½é©—è­‰

- [ ] **API ç«¯é»æ¸¬è©¦**
  - [ ] ä½¿ç”¨ Postman/curl æ¸¬è©¦æ–°ç«¯é»
  - [ ] æª¢æŸ¥ Swagger UI æ–‡æª”
  - [ ] æ¸¬è©¦éŒ¯èª¤è™•ç†

- [ ] **è³‡æ–™å®Œæ•´æ€§é©—è­‰**
  ```sql
  -- æª¢æŸ¥å­¤å…’è¨˜éŒ„
  SELECT COUNT(*) FROM your_table yt
  LEFT JOIN parent_table pt ON yt.parent_id = pt.id
  WHERE pt.id IS NULL;

  -- æª¢æŸ¥å”¯ä¸€ç´„æŸ
  SELECT column_name, COUNT(*)
  FROM your_table
  GROUP BY column_name
  HAVING COUNT(*) > 1;
  ```

- [ ] **æ•ˆèƒ½é©—è­‰**
  ```sql
  -- æª¢æŸ¥æŸ¥è©¢è¨ˆç•«
  EXPLAIN ANALYZE SELECT * FROM your_table WHERE user_id = 1;

  -- æª¢æŸ¥ç´¢å¼•ä½¿ç”¨
  SELECT indexname, idx_scan
  FROM pg_stat_user_indexes
  WHERE tablename = 'your_table';
  ```

### ç›£æ§è¨­å®š

- [ ] **æ—¥èªŒç›£æ§**
  - [ ] æª¢æŸ¥æ‡‰ç”¨æ—¥èªŒç„¡éŒ¯èª¤
  - [ ] æª¢æŸ¥è³‡æ–™åº«æ—¥èªŒç„¡è­¦å‘Š

- [ ] **è³‡æ–™è¡¨å¤§å°ç›£æ§**
  ```sql
  SELECT pg_size_pretty(pg_total_relation_size('your_table'));
  ```

- [ ] **å‘Šè­¦è¨­å®š**ï¼ˆå¦‚æœæ˜¯é—œéµè³‡æ–™è¡¨ï¼‰
  - [ ] è³‡æ–™è¡¨å¤§å°è¶…éé–¾å€¼
  - [ ] æŸ¥è©¢æ•ˆèƒ½ä¸‹é™
  - [ ] éŒ¯èª¤ç‡ä¸Šå‡

---

## ğŸ”„ å›æ»¾è¨ˆç•«

å¦‚æœéƒ¨ç½²å¾Œç™¼ç¾å•é¡Œï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿå›æ»¾ï¼š

### æ­¥é©Ÿ 1: åœæ­¢æœå‹™
```bash
docker compose stop backend celery-worker
```

### æ­¥é©Ÿ 2: å›æ»¾é·ç§»
```bash
docker compose exec backend alembic downgrade -1
```

### æ­¥é©Ÿ 3: é‚„åŸç¨‹å¼ç¢¼
```bash
git revert <commit-hash>
docker compose up --build -d
```

### æ­¥é©Ÿ 4: é©—è­‰å›æ»¾
```bash
docker compose exec backend alembic current
docker compose logs backend
```

---

## ğŸ“‹ å¸¸è¦‹å•é¡Œ

### Q: Alembic è‡ªå‹•ç”Ÿæˆçš„é·ç§»æª”æ¡ˆæ¼æ‰äº†ç´¢å¼•ï¼Œæ€éº¼è¾¦ï¼Ÿ

**A**: æ‰‹å‹•åœ¨é·ç§»æª”æ¡ˆçš„ `upgrade()` ä¸­åŠ å…¥ï¼š
```python
def upgrade():
    # ... Alembic è‡ªå‹•ç”Ÿæˆçš„å…§å®¹

    # æ‰‹å‹•åŠ å…¥è¤‡åˆç´¢å¼•
    op.create_index('idx_your_table_user_created', 'your_table', ['user_id', 'created_at'])
```

### Q: å¦‚ä½•è™•ç†å¤§é‡ç¾æœ‰è³‡æ–™çš„é·ç§»ï¼Ÿ

**A**: ä½¿ç”¨æ‰¹æ¬¡é·ç§»ï¼š
```python
def upgrade():
    # å»ºç«‹æ–°æ¬„ä½ï¼ˆå…è¨± NULLï¼‰
    op.add_column('your_table', sa.Column('new_column', sa.String(), nullable=True))

    # æ‰¹æ¬¡æ›´æ–°è³‡æ–™
    connection = op.get_bind()
    connection.execute(text("UPDATE your_table SET new_column = 'default_value'"))

    # è¨­å®š NOT NULLï¼ˆè³‡æ–™å·²å¡«å…¥ï¼‰
    op.alter_column('your_table', 'new_column', nullable=False)
```

### Q: å¦‚ä½•æ¸¬è©¦ç´šè¯åˆªé™¤è¡Œç‚ºï¼Ÿ

**A**: å»ºç«‹æ¸¬è©¦è³‡æ–™ä¸¦åˆªé™¤çˆ¶ç‰©ä»¶ï¼š
```python
# å»ºç«‹çˆ¶ç‰©ä»¶
user = User(email="test@example.com", username="test")
db.add(user)
db.commit()

# å»ºç«‹å­ç‰©ä»¶
strategy = Strategy(user_id=user.id, name="Test")
db.add(strategy)
db.commit()

# åˆªé™¤çˆ¶ç‰©ä»¶
db.delete(user)
db.commit()

# é©—è­‰å­ç‰©ä»¶å·²åˆªé™¤
assert db.query(Strategy).filter(Strategy.id == strategy.id).first() is None
```

### Q: å¦‚ä½•å„ªåŒ–å¤§å‹è³‡æ–™è¡¨çš„æŸ¥è©¢ï¼Ÿ

**A**: ä½¿ç”¨ä»¥ä¸‹æŠ€å·§ï¼š
1. å»ºç«‹é©ç•¶çš„ç´¢å¼•ï¼ˆè¤‡åˆç´¢å¼•ã€éƒ¨åˆ†ç´¢å¼•ï¼‰
2. ä½¿ç”¨ `EXPLAIN ANALYZE` åˆ†ææŸ¥è©¢è¨ˆç•«
3. è€ƒæ…®ä½¿ç”¨ TimescaleDB hypertableï¼ˆæ™‚åºæ•¸æ“šï¼‰
4. å¯¦ä½œåˆ†é ï¼ˆLIMIT/OFFSETï¼‰
5. ä½¿ç”¨ Redis å¿«å–ç†±é–€æŸ¥è©¢

---

## ğŸ“ ç·Šæ€¥è¯çµ¡

å¦‚æœé‡åˆ°ç„¡æ³•è§£æ±ºçš„å•é¡Œï¼š

1. **æª¢æŸ¥æ—¥èªŒ**:
   ```bash
   docker compose logs backend
   docker compose logs postgres
   ```

2. **æŸ¥çœ‹é·ç§»æ­·å²**:
   ```bash
   docker compose exec backend alembic history
   docker compose exec backend alembic current
   ```

3. **è³‡æ–™åº«é€£ç·šæ¸¬è©¦**:
   ```bash
   docker compose exec postgres psql -U quantlab quantlab -c "SELECT 1;"
   ```

4. **åƒè€ƒæ–‡æª”**:
   - `DATABASE_SCHEMA_REPORT.md` - å®Œæ•´è³‡æ–™åº«æ–‡æª”
   - `DATABASE_MAINTENANCE.md` - ç¶­è­·æŒ‡å—
   - `CLAUDE.md` - å°ˆæ¡ˆé–‹ç™¼æŒ‡å—

---

**è®Šæ›´è¨˜éŒ„**:
- 2025-12-05: åˆå§‹ç‰ˆæœ¬å»ºç«‹
  - å»ºç«‹å®Œæ•´çš„æª¢æŸ¥æ¸…å–®ï¼ˆ56 å€‹æª¢æŸ¥é …ç›®ï¼‰
  - æ¶µè“‹è¨­è¨ˆã€å¯¦ä½œã€æ¸¬è©¦ã€éƒ¨ç½²ã€é©—è­‰å…¨æµç¨‹
  - åŠ å…¥å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

**ç¶­è­·**:
- æ­¤æª¢æŸ¥æ¸…å–®æ‡‰éš¨å°ˆæ¡ˆæ¼”é€²æŒçºŒæ›´æ–°
- æ¯æ¬¡è³‡æ–™åº«è®Šæ›´å¾Œï¼Œæª¢è¨æª¢æŸ¥æ¸…å–®æ˜¯å¦å®Œæ•´
- æ–°ç™¼ç¾çš„å•é¡Œæ‡‰åŠ å…¥ã€Œå¸¸è¦‹å•é¡Œã€ç« ç¯€
